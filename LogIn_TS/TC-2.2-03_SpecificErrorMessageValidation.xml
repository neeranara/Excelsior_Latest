<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="2f211d11-74cd-43fd-9a09-b8439d712ea5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="TC-2.2-03_SpecificErrorMessageValidation" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="2f211d11-74cd-43fd-9a09-b8439d712ea5fileName">TC-2.2-03_SpecificErrorMessageValidation</con:setting></con:settings><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="restrequest" name="GetClientCred" id="71660842-8a35-45bf-9cff-44d9d5db6a77"><con:settings/><con:config service="REST Service 1" resourcePath="/connect/token" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetClientCred" id="63c49e61-2aee-454a-be4b-c0be665b8ae9" mediaType="application/x-www-form-urlencoded" postQueryString="true"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://excelsiorqa-api.eyekor.com</con:endpoint><con:request/><con:originalUri>https://excelsiorqa-api.eyekor.com/connect/token</con:originalUri><con:assertion type="JsonPath Existence Match" id="a1789372-d8a5-4fe3-a097-addffc8a54bb" name="Check for existence of [access_token]"><con:configuration><path>$['access_token']</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="Origin" value="https://excelsiorqa.eyekor.com"/>
  <con:entry key="password" value="${Invalid_Passwords#password}"/>
  <con:entry key="grant_type" value="client_credentials"/>
  <con:entry key="scope" value="webapi"/>
  <con:entry key="client_secret" value="ExcelsiorWebSecret"/>
  <con:entry key="client_id" value="9E1E36E2-BE2B-4D53-9B18-8078607CABA4"/>
  <con:entry key="Content-Type" value="application/x-www-form-urlencoded"/>
</con:parameters><con:parameterOrder><con:entry>Origin</con:entry><con:entry>Content-Type</con:entry><con:entry>grant_type</con:entry><con:entry>client_id</con:entry><con:entry>client_secret</con:entry><con:entry>scope</con:entry><con:entry>username</con:entry><con:entry>password</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Copy of temp_transfer" id="994a9cf6-69fe-49e6-9d9b-4f06eaeccf5e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>criteria_temp</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>GetClientCred</con:sourceStep><con:sourcePath>$['access_token']</con:sourcePath><con:targetType>temp_token1</con:targetType><con:targetStep>#Project#</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="05ceb63e-45d8-41c7-98cb-8cf7d3712569"><con:settings/><con:config><script>
def list =['@12345678901234567890123456789012345678901234567890', '@eye', 'eyekor','123456789012345678901234567890123456789012345678901', 'eyekor1']
list.eachWithIndex { val, index -> 
    if(index &lt; 2)
    {
    	testRunner.testCase.testSteps["Password_Prop"].setPropertyValue( "length", "${val}" )
    	def testStep = testRunner.testCase.testSteps['Enter_InvalidPW']
     testStep.run( testRunner, context )
    }
    else if( index > 1 &amp;&amp; index &lt;4)
     {
    	testRunner.testCase.testSteps["Password_Prop"].setPropertyValue( "length", "${val}" )
    	def testStep = testRunner.testCase.testSteps['Enter_InvalidPW_TwoMessages']
     testStep.run( testRunner, context )
    }
    else
    {
     testRunner.testCase.testSteps["Password_Prop"].setPropertyValue( "length", "${val}" )
    	def testStep = testRunner.testCase.testSteps['Copy of Enter_InvalidPW']
     testStep.run( testRunner, context )
    }
}
testRunner.cancel( "done" )


</script></con:config></con:testStep><con:testStep type="properties" name="Password_Prop" id="d55aa48b-aa70-4ddf-b71e-ca88f06980eb"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>length</con:name><con:value>eyekor1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="Enter_InvalidPW" id="4c05afd9-4c66-4f8a-a805-045c695c1c9f"><con:settings/><con:config service="Excelsior API" resourcePath="/api/v1/Auth/ResetPassword/{username}" methodName="ApiV1AuthResetPasswordByUsernamePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Enter_InvalidPW" id="6183a50a-7a5c-45f5-aa02-a59cab40a979" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://excelsiorqa-api.eyekor.com</con:endpoint><con:request>{
  "Answer": "black",
  "NewPassword": "${Password_Prop#length}",
  "PasswordConfirmation": "${Password_Prop#length}"
}</con:request><con:originalUri>https://excelsiorqa-api.eyekor.com/api/v1/Auth/ResetPassword/admin</con:originalUri><con:assertion type="JsonPath Match" id="5aac07be-66bd-42e8-b355-fcc3bdee3945" name="Match content of [errorMessage]"><con:configuration><path>$['result'][0]['errorMessage']</path><content>Password must be at least 7 and at most 50 characters long.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="Authorization" value="${#Project#token_type}${#Project#temp_token1}"/>
  <con:entry key="username" value="admin"/>
</con:parameters><con:parameterOrder><con:entry>username</con:entry><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Copy of Enter_InvalidPW" id="46c34a0b-3ca3-4870-84d0-3a8c13c3b998"><con:settings/><con:config service="Excelsior API" resourcePath="/api/v1/Auth/ResetPassword/{username}" methodName="ApiV1AuthResetPasswordByUsernamePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Copy of Enter_InvalidPW" id="6183a50a-7a5c-45f5-aa02-a59cab40a979" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://excelsiorqa-api.eyekor.com</con:endpoint><con:request>{
  "Answer": "black",
  "NewPassword": "${Password_Prop#length}",
  "PasswordConfirmation": "${Password_Prop#length}"
}</con:request><con:originalUri>https://excelsiorqa-api.eyekor.com/api/v1/Auth/ResetPassword/admin</con:originalUri><con:assertion type="JsonPath Match" id="5aac07be-66bd-42e8-b355-fcc3bdee3945" name="Match content of [errorMessage]"><con:configuration><path>$['result'][0]['errorMessage']</path><content>Password needs to contain at least one special character e.g. @ or #.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="Authorization" value="${#Project#token_type}${#Project#temp_token1}"/>
  <con:entry key="username" value="admin"/>
</con:parameters><con:parameterOrder><con:entry>username</con:entry><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Enter_InvalidPW_TwoMessages" id="c9946525-3084-45e0-a55e-c69b2e8409ed"><con:settings/><con:config service="Excelsior API" resourcePath="/api/v1/Auth/ResetPassword/{username}" methodName="ApiV1AuthResetPasswordByUsernamePost" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Enter_InvalidPW_TwoMessages" id="6183a50a-7a5c-45f5-aa02-a59cab40a979" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://excelsiorqa-api.eyekor.com</con:endpoint><con:request>{
  "Answer": "black",
  "NewPassword": "${Password_Prop#length}",
  "PasswordConfirmation": "${Password_Prop#length}"
}</con:request><con:originalUri>https://excelsiorqa-api.eyekor.com/api/v1/Auth/ResetPassword/admin</con:originalUri><con:assertion type="JsonPath Match" id="5aac07be-66bd-42e8-b355-fcc3bdee3945" name="Match content of [errorMessage]"><con:configuration><path>$['result'][0]['errorMessage']</path><content>Password needs to contain at least one special character e.g. @ or #.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" name="Match content of [errorMessage] 1" id="eb01a4b8-6590-48cb-828d-58441bf76998"><con:configuration><path>$['result'][1]['errorMessage']</path><content>Password must be at least 7 and at most 50 characters long.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="Authorization" value="${#Project#token_type}${#Project#temp_token1}"/>
  <con:entry key="username" value="admin"/>
</con:parameters><con:parameterOrder><con:entry>username</con:entry><con:entry>Authorization</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>05a1b3c2-c318-4913-a067-9505c8d47e6b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>96691820-bb2f-49cd-8f92-d68543855c18</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ef0d02f-317c-4894-956c-0e663744c686</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>afc49b32-0936-4aed-9a58-c887d5bb96ae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>835697b3-b0aa-4a9a-a219-8d60eaad4488</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9c7781ed-2e01-424b-9e8a-7ef216d870dc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>05ceb63e-45d8-41c7-98cb-8cf7d3712569</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46c34a0b-3ca3-4870-84d0-3a8c13c3b998</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d55aa48b-aa70-4ddf-b71e-ca88f06980eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase>